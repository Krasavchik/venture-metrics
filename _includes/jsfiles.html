<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script type="text/javascript">
    $(document).ready(function(){

        var filters = {
            "category": [],
            "year": [],
            "stage": [],
            "area": []
        };

        $(".filter-box").click(function(e){
            var value = $(this).attr('data-filter');
            var cat_tmp = $(this).attr('data-filter-type');
            var index = 0;
            if( $(this)[0].checked ){
                filters[cat_tmp].push(value);
            }
            else{
                index = filters[cat_tmp].indexOf(value);
                filters[cat_tmp].splice(index, 1);
            }

            $('.filter').each(function(){
                var show_me = false;

                for (var key in filters) {
                    if(filters[key].length == 0){
                        show_me = true
                    } else{
                        if (filters[key].indexOf($(this).attr('data-filter-'+key)) >= 0) {
                            show_me = true;
                        }
                        else{
                            show_me = false;
                            break;
                        }
                    }
                }

                if( show_me ){
                    $(this).show();
                } else{
                    $(this).hide();
                }
            });
        });
    });
</script>
